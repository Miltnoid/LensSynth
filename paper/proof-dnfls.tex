We will prove a couple of lemmas first.

\begin{lemma}[Creation of Lens from Identity Perm Sequence Lens]
\label{lem:id-clause}
Let $\Sequence=\SequenceOf{\String_0 ; \Atom_1 ; \ldots ; \Atom_n; \String_n}$,
and $\SequenceAlt=\SequenceOf{\StringAlt_0 ; \AtomAlt_1 ; \ldots ; \AtomAlt_n ; \StringAlt_n}$.
If $(\SequenceLensOf{(\String_0,\StringAlt_0);\AtomLens_1 ; \ldots ;
\AtomLens_n;(\String_n,\StringAlt_n)},id) \OfType
\Sequence \Leftrightarrow \SequenceAlt$,
and for each $\AtomLens_i \OfType \Atom_i \Leftrightarrow \AtomAlt_i$,
there exists a $\Lens_i \OfType \ToRegex(\Atom_i) \Leftrightarrow \ToRegex(\AtomAlt_i)$ such that
then there exists a $\Lens \OfType \ToRegex(\Sequence) \Leftrightarrow \ToRegex(\DNFRegexAlt)$ such that
$\SemanticsOf{\Lens} =
\SemanticsOf{(\SequenceLensOf{\AtomLens_1 ; \ldots ; \AtomLens_n},id)}$,
\begin{proof}

By induction on $n$.

Let $n=0$, $(\SequenceLensOf{(\String_0,\StringAlt_0)},id) \OfType
\SequenceOf{\String_0} \Leftrightarrow \SequenceOf{\StringAlt_0}$.
Then consider
\begin{mathpar}
\inferrule[]
{
}
{
\ConstLens{\String_0}{\StringAlt_0}\OfType\String_0\Leftrightarrow\StringAlt_0
}
\end{mathpar}

$\String_0=\ToRegex(\SequenceOf{\String_0})$,
and
$\StringAlt_0=\ToRegex(\SequenceOf{\StringAlt_0})$.
$\SemanticsOf{\ConstLens{\String_0}{\StringAlt_0}}=
\SetOf{\String_0,\StringAlt_0}=
\SemanticsOf{\SequenceOf{(\String_0,\StringAlt_0)},id)}$.

Let $n>0$.
Let $\Sequence'=\SequenceOf{\String_0\SequenceSep\Atom_1\SequenceSep
\ldots\SequenceSep\Atom_{n-1}\SequenceSep\String_{n-1}}$,
and $\SequenceAlt'=\SequenceOf{\StringAlt_0\SequenceSep\AtomAlt_1\SequenceSep
\ldots\SequenceSep\AtomAlt_{n-1}\SequenceSep\StringAlt_{n-1}}$
By induction assumption, there exists a typing derivation
\begin{mathpar}
\inferrule*
{
\inferrule*[vdots=1.5em]
{
}
{
}
}
{
\Lens\OfType\ToRegex(\Sequence')\Leftrightarrow\ToRegex(\SequenceAlt')
}
\end{mathpar}
Satisfying $\SemanticsOf{\Lens}=
\SemanticsOf{(\SequenceLensOf{(\String_0,\StringAlt_0);\AtomLens_1 ;
\ldots ; \AtomLens_n;(\String_n,\StringAlt_{n-1})},id)}$

By problem statement, there exists a typing derivation
\begin{mathpar}
\inferrule*[left=$\Derivation_n$]
{
\inferrule*[vdots=1.5em]
{
}
{
}
}
{
\Lens_{\AtomLens_{n}} \OfType
\ToRegex(\Atom_{n}) \Leftrightarrow \ToRegex(\AtomAlt_{n})
}
\end{mathpar}
satisfying $\SemanticsOf{\Lens_{\Atom_n}}=\SemanticsOf{\Atom_n}$.

Consider the following lens typing
\begin{mathpar}
\inferrule*[left=\Derivation{}]
{
\Derivation_n\\
\inferrule*
{
}
{
\ConstLens{\String_n}{\StringAlt_n}
\OfType
\String_n \Leftrightarrow \StringAlt_n
}
}
{
\ConcatLens{\Lens_{\AtomLens_n}}{\ConstLens{\String_n}{\StringAlt_n}}
\OfType\\
\ToRegex(\Atom_n)\Concat\String_n \Leftrightarrow
\ToRegex(\AtomAlt_n)\Concat\StringAlt_n
}

\inferrule*{
\inferrule*
{
\inferrule*[vdots=1.5em]
{
}
{
}
}
{
\Lens\OfType\ToRegex(\Sequence) \Leftrightarrow \ToRegex(\SequenceAlt)
}\\
\Derivation{}
}
{
\ConcatLens
{\Lens}
{\ConcatLens{\Lens_{\AtomLens_n}}{\ConstLens{\String_n}{\StringAlt_n}}}
\OfType\\
\ToRegex(\Sequence)\Concat\ToRegex(\Atom_n)\Concat\String_n \Leftrightarrow\\
\ToRegex(\SequenceAlt)\Concat\ToRegex(\AtomAlt_n)\Concat\StringAlt_n
}
\end{mathpar}

\SemanticsOf{\ConcatLens
{\Lens}
{\ConcatLens{\Lens_{\AtomLens_n}}{\ConstLens{\String_n}{\StringAlt_n}}}}=\\
\SetOf{(\String'\Concat\String''\String_n,\StringAlt'\Concat\StringAlt''\StringAlt_n)
\SuchThat
(\String',\StringAlt')\in\SemanticsOf{\Lens}\BooleanAnd
(\String'',\StringAlt'')\in\SemanticsOf{\Lens_{\AtomLens_n}}}=\\
\SetOf{
(\String_0\Concat\String_0'\Concat\ldots
\Concat\String_{n-1}'\Concat\String_{n-1}
\Concat \String_n \Concat \String_n'
,
\StringAlt_0\Concat\StringAlt_0'\Concat\ldots
\Concat\StringAlt_{n-1}'\Concat\StringAlt_{n-1}
\Concat \String_n \Concat \String_n')\SuchThat\\
\hspace*{1em}\String_i'\in\Atom_i\BooleanAnd\StringAlt_i'\in\AtomAlt_i}=\\
\SemanticsOf{(\SequenceLensOf{(\String_0,\StringAlt_0);\AtomLens_1 ;
\ldots ; \AtomLens_n;(\String_n,\StringAlt_{n-1})},id)}
\end{proof}
\end{lemma}

\begin{definition}[Adjacent Swapping Permutation]
Let $\sigma_{i} \in S_n$ be the permutation where
$\sigma_{i}(i) = i+1$, $\sigma_{i}(i+1) = i$, $\sigma_{i,j}(k\neq i,i+1) = k$
\end{definition}

\begin{theorem}[Unambiguity of Sep]
Given an alphabet, \Alphabet{}, we can expand the alphabet by adding in a different
element, denoted \Sep{}.
For any sequence of languages $\Language_1\in\StarOf{\Alphabet}$, \ldots,
$\Language_n\in\StarOf{\Alphabet}$, $\Sep\Language_1\Sep\ldots\Sep\Language_i
\UnambigConcat
\Sep\Language_{i+1}\ldots\Sep\Language_n\Sep$.
\end{theorem}
\begin{proof}
We know that all of the string before the $i+1$st instance of $\Sep$ is
part of the first, and the rest is part of the second.
\end{proof}

\begin{lemma}[Expressibility of Adjacent Swapping Permutation Lens]
Let $\sigma_i$ be an adjacent element swapping permutation and
$\SequenceOf{\Sep;\Atom_1;\ldots;\Atom_n;\Sep}$ be a sequence with $\Sep$ as
the strings between atoms.
There exists regular expressions $\Regex$ and $\RegexAlt$, and a lens $\Lens$,
such that $\LanguageOf{\Regex}=\LanguageOf{[\Sep;\Atom_1;\ldots;\Atom_n;\Sep]}$,
$\LanguageOf{\RegexAlt}=\LanguageOf{[\Sep;\Atom_{\sigma(1)};\ldots;\Atom_{\sigma(n)};\Sep]}$, and
$\Lens \OfType \Regex \Leftrightarrow \RegexAlt$,
with semantics
$\SemanticsOf{\Lens}=
\SetOf{(\Sep\Concat\String_1\Concat\ldots\Concat\String_n\Concat\Sep,
\Sep\Concat\String_{\sigma_i(1)}\Concat\ldots\Concat\String_{\sigma_i(n)}\Concat\Sep)
\SuchThat\String_i\in\LanguageOf{\Atom_i}}$
\begin{proof}
By the soundness of regular expressions, define
$\Regex_1, \Regex_2, \Regex_3, \Regex_4$ as
$\Regex_1=\ToRegex([\Sep;\Atom_1;\ldots;\Atom_{i-1};\Sep])$,
$\Regex_2=\ToRegex(\Atom_i)$,
$\Regex_3=\ToRegex(\Atom_{i+1})$, and
$\Regex_4=\ToRegex([\Sep;\Atom_{i+1};\ldots;\Atom_{n};\Sep])$.
Consider the following deduction
\begin{mathpar}

\inferrule*[left=\Derivation{}]
{
\inferrule*
{
}
{
\IdentityLensShort \OfType \Sep \Leftrightarrow \Sep
}
\inferrule*
{
}
{
\IdentityLensShort \OfType \Regex_3 \Leftrightarrow \Regex_3
}
}
{
\SwapLensShort{\IdentityLensShort}{\IdentityLensShort} \OfType 
\String_i\Concat\Regex_3 \Leftrightarrow \Regex_3\Concat\String_i
}

\inferrule*[left=\Derivation{}']
{
\inferrule*
{
}
{
\IdentityLensShort \OfType \Regex_2 \Leftrightarrow \Regex_2
}\\
\Derivation
}
{
\SwapLensShort{\IdentityLensShort}{\SwapLensShort{\IdentityLensShort}{\IdentityLensShort}} \OfType
\Regex_2\Concat\String_i\Concat\Regex_3 \Leftrightarrow \Regex_3\Concat\String_i\Concat\Regex_2
}

\inferrule*[left=\Derivation{}'']
{
\inferrule*
{
}
{
\IdentityLensShort \OfType \Regex_1 \Leftrightarrow \Regex_1
}\\
\Derivation{}'
}
{
\ConcatLensShort{\IdentityLensShort}{\SwapLensShort{\IdentityLensShort}{\SwapLensShort{\IdentityLensShort}{\IdentityLensShort}}} \OfType
\Regex_1\Concat\Regex_2\Concat\String_i\Concat\Regex_3 \Leftrightarrow \Regex_1\Concat\Regex_3\Concat\String_i\Concat\Regex_2
}


\inferrule*
{
\Derivation{}''\\
\inferrule*
{
}
{
\IdentityLens \OfType \Regex_4 \Leftrightarrow \Regex_4
}
}
{
\ConcatLensShort{\ConcatLensShort{\IdentityLensShort}{\SwapLensShort{\IdentityLensShort}{\SwapLensShort{\IdentityLensShort}{\IdentityLensShort}}}}{\IdentityLensShort} \OfType\\
\Regex_1\Concat\Regex_2\Concat\String_i\Concat\Regex_3\Concat\Regex_4 \Leftrightarrow \Regex_1\Concat\Regex_3\Concat\String_i\Concat\Regex_2\Concat\Regex_4
}
\end{mathpar}

By inspection, the lens $
\ConcatLensShort{\ConcatLensShort{\IdentityLensShort}{\SwapLensShort{\IdentityLensShort}{\SwapLensShort{\IdentityLensShort}{\IdentityLensShort}}}}{\IdentityLensShort} \OfType
\Regex_1\Concat\Regex_2\Concat\String_i\Concat\Regex_3\Concat\Regex_4 \Leftrightarrow \Regex_1\Concat\Regex_3\Concat\String_i\Concat\Regex_2\Concat\Regex_4$
satisfies $\LanguageOf{\Regex_1\Concat\Regex_2\Concat\String_i\Concat\Regex_3\Concat\Regex_4}=\LanguageOf{\SequenceOf{\Sep;\Atom_1;\ldots;\Atom_n;\Sep}}$ and
$\LanguageOf{\Regex_1\Concat\Regex_3\Concat\String_i\Concat\Regex_2\Concat\Regex_4}=\LanguageOf{\SequenceOf{\Sep;\Atom_{\sigma_i(1)};\ldots;\Atom_{\sigma_i(n)};\Sep}}$
and has the desired semantics.
\end{proof}
\end{lemma}

\begin{lemma}[Expressibility of Permutation]
\label{lem:perm-exp}
The language of lenses can express $([(\Sep,\Sep) ; \IdentityLens ; \ldots ; \IdentityLens ; (\Sep,\Sep)], \sigma)$
for any permutation $\sigma$.
\begin{proof}
Let $\sigma$ be a permutation.
Consider the clause lens\\ $([(\Sep,\Sep) ; \IdentityLens ; \ldots ; \IdentityLens ; (\Sep,\Sep)], \sigma_{i})$.
From algebra, we know that the group of permutations is generated by all
adjacent swaps $\sigma_i = (i,i+1)$.
So there exists an adjacency swap decomposition of $\sigma = \sigma_{i_1}\ldots\sigma_{i_m}$.
Consider the dnf lens\\ $([(\Sep,\Sep) ; \IdentityLens ; \ldots ; \IdentityLens ; (\Sep,\Sep)], \sigma_{i_j})$ for each $\sigma_{i_j}$.
By the above lemma, there exists a $\Lens_j$ for each of these adjacency swaps.
Consider the lens $\Lens = \ComposeLens{\Lens_{1}}{\ComposeLens{\Lens_{2}}{\ldots \ComposeLens{}{\Lens_{m}}}}$,
with retypes put in where necessary to handle different associations.

\end{proof}
\end{lemma}

\begin{lemma}[Creation of Lens from Identity Perm DNF Lens]
\label{lem:id-dnf}
If $(\DNFLensOf{\SequenceLens_1 ; \ldots ; \SequenceLens_n},id) \OfType
\DNFOf{\Sequence_1 ; \ldots ; \Sequence_n} \Leftrightarrow \DNFOf{\SequenceAlt_1 ; \ldots ; \SequenceAlt_n}$,
and for each $\SequenceLens_i \OfType \Sequence_i \Leftrightarrow \SequenceAlt_i$,
there exists a $\Lens_i \OfType \ToRegex(\Sequence_i) \Leftrightarrow \ToRegex(\SequenceAlt_i)$ such that
$\SemanticsOf{\Lens_i} = \SemanticsOf{\SequenceLens_i}$,
then there exists a $\Lens \OfType \ToRegex(\DNFOf{\Sequence_1 ; \ldots ; \Sequence_n}) \Leftrightarrow \ToRegex(\DNFOf{\SequenceAlt_1 ; \ldots ; \SequenceAlt_n})$ such that $\SemanticsOf{\Lens} = \SemanticsOf{([\SequenceLens_1 ; \ldots ; \SequenceLens_n],id)}$.
\begin{proof}
By induction on n

Let $n=0$.
$\DNFLensOf{} \OfType \DNFOf{} \Leftrightarrow \DNFOf{}$.  Then consider $\Lens$ = $\IdentityLens$.
\\

Let $n>0$.
By induction assumption, I know
there exists a $\Lens \OfType \ToRegex(\DNFOf{\Sequence_1 ; \ldots ; \Sequence_n}) \Leftrightarrow \ToRegex(\DNFOf{\SequenceAlt_1 ; \ldots ; \SequenceAlt_n})$ such that
$\SemanticsOf{\Lens} = \SemanticsOf{(\DNFLensOf{\SequenceLens_1 ; \ldots ; \SequenceLens_{n-1}},id)}$.
By assumption, I know that there exists a $\Lens_{n} \OfType \ToRegex(\Sequence_{n}) \Leftrightarrow \ToRegex(\SequenceAlt_{n})$
where $\SemanticsOf{\Lens_{n}}=\SemanticsOf{\SequenceLens_{n}}$.\\
Consider the lens $\OrLens{\Lens}{\Lens_{n}} \OfType \RegexOr{\ToRegex(\DNFOf{\Sequence_1 ; \ldots ; \Sequence_{n-1}})}{\ToRegex(\Sequence_{n})} \Leftrightarrow \RegexOr{\ToRegex(\DNFOf{\SequenceAlt_1 ; \ldots ; \SequenceAlt_{n-1}})}{\ToRegex(\SequenceAlt_{n})}$.\\
by definition of $\ToRegex$, we know $\RegexOr{\ToRegex(\DNFOf{\Sequence_1 ; \ldots ; \Sequence_{n-1}})}{\ToRegex(\Sequence_{n})}=\ToRegex(\DNFOf{\Sequence_1;\ldots;\Sequence_n})$, and $\RegexOr{\ToRegex(\DNFOf{\SequenceAlt_1 ; \ldots ; \SequenceAlt_{n-1}})}{\ToRegex(\SequenceAlt_{n})}=\ToRegex(\DNFOf{\SequenceAlt_1;\ldots;\SequenceAlt_n})$

$\PutRightOf{\OrLens{\Lens}{\Lens_n}}=\SetOf{(\String,\StringAlt)\SuchThat
(\String,\StringAlt)\in\Lens\BooleanOr(\String,\StringAlt)\in\Lens_n}$\\
$=\SetOf{(\String,\StringAlt)\SuchThat
(\String,\StringAlt)\in\DNFLensOf{\SequenceLens_1;\ldots;\SequenceLens_{n-1}}
\BooleanOr(\String,\StringAlt)\in\DNFLensOf{\SequenceLens_n}}$\\
$=\SetOf{(\String,\StringAlt)\SuchThat
(\String,\StringAlt)\in\SequenceLens_i}$.
\end{proof}
\end{lemma}

\begin{lemma}[Rewrites Respecting Language]
\label{lem:rrl}
If $\DNFRegex\Rewrite\DNFRegexAlt$, then $\LanguageOf{\DNFRegex}=\LanguageOf{\DNFRegexAlt}$
\end{lemma}
\begin{proof}
Each of the rewrite rules are merely an application of one direction of one of
the regular expression star equivalences.
\end{proof}

\begin{lemma}[Soundness of DNF, Sequence, and Atom Lenses]\leavevmode
\label{lem:dnfcal}
\begin{enumerate}
\item Let \DNFRegex{} and \DNFRegexAlt{} be two dnf regular expressions, and $\DNFLens \OfType \DNFRegex \Leftrightarrow \DNFRegexAlt$.  Then there exists a \Lens{} such that $\Lens \OfType \ToRegex(\DNFRegex) \Leftrightarrow \ToRegex(\DNFRegexAlt)$, \SemanticsOf{\Lens}=\SemanticsOf{\DNFLens}

\item Let \Sequence{} and \SequenceAlt{} be two clauses, and $\SequenceLens \OfType \Sequence \Leftrightarrow \SequenceAlt$.  Then there exists a \Lens{} such that $\Lens \OfType \ToRegex(\Sequence) \Leftrightarrow \ToRegex(\SequenceAlt)$, \SemanticsOf{\Lens}=\SemanticsOf{\SequenceLens}.

\item Let \Atom{} and \AtomAlt{} be two atoms, and $\AtomLens \OfType \Atom \Leftrightarrow \AtomAlt$.  Then there exists a \Lens{}, such that $\Lens \OfType \ToRegex(\Atom) \Leftrightarrow \ToRegex(\AtomAlt)$, \SemanticsOf{\Lens}=\SemanticsOf{\AtomLens}.
\end{enumerate}
\begin{proof}
By mutual induction on the structure of the DNF Regex, Sequence, and Atom.\\
\\
Let $(\DNFLensOf{\SequenceLens_1;\ldots;\SequenceLens_n},\sigma) \OfType \DNFOf{\Sequence_1;\ldots;\Sequence_n} \Leftrightarrow \DNFOf{\SequenceAlt_{\sigma(1)};\ldots;\SequenceAlt_{\sigma(n)}}$ be formed from an application of $\DNFLensRule$.
By Induction assumption, for each $\SequenceLens_i \OfType \Sequence_i \Leftrightarrow \SequenceAlt_i$ there exists a $\Lens_i \OfType \ToRegex(\Sequence_i) \Leftrightarrow \ToRegex(\SequenceAlt_i)$.\\
By Lemma~\ref{lem:id-dnf} there exists a $\Lens \OfType \ToRegex(\DNFOf{\Sequence_1;\ldots;\Sequence_{n}}) \Leftrightarrow \ToRegex(\DNFOf{\SequenceAlt_1;\ldots;\SequenceAlt_{n}})$ such that $\SemanticsOf{\Lens}=\SemanticsOf{([\SequenceLens_1;\ldots\SequenceLens_n],id)}$,
$\PutRightOf{([\SequenceLens_1;\ldots\SequenceLens_n],id)}=\PutRightOf{([\SequenceLens_1;\ldots\SequenceLens_n],\sigma)}$, as the order has no impact on the semantics of the lens.
$\LanguageOf{[\SequenceAlt_1;\ldots;\SequenceAlt_n]}=\LanguageOf{[\SequenceAlt_{\sigma(1)};\ldots;\SequenceAlt_{\sigma(n)}]}$, as the order has no impact on the semantics of the DNF regular expression.
As such, using retyping, there exists a lens
$\Lens\OfType\ToRegex(\DNFOf{\Sequence_1;\ldots;\Sequence_n}) \Leftrightarrow \ToRegex(\DNFOf{\Sequence_{\sigma(1)};\ldots;\Sequence_{\sigma(n)}})$
with
$\SemanticsOf{\Lens}=\SemanticsOf{([\SequenceLens_1;\ldots\SequenceLens_n],\sigma)}$.\\
\\
Let $\DNFLens \OfType \DNFRegex \Leftrightarrow \DNFRegexAlt$ be formed from
an application of DNF rewrite rules.  By Lemma~\ref{lem:rrl},
we know that if $\DNFRegex\RewriteDNF\DNFRegex'$, then
$\LanguageOf{\DNFRegex}=\LanguageOf{\DNFRegex'}$,
so we can merely use the typing before the rewrite, and do a retype lens to
$\ToRegex(\DNFRegex) \Leftrightarrow \ToRegex(\DNFRegexAlt)$.\\
\\
Let there be a sequence, $(\SequenceLensOf{(\String_0,\StringAlt_0);\AtomLens_1;\ldots;\AtomLens_n;(\String_n,\StringAlt_n)},\sigma \in S_n) \OfType \SequenceOf{\String_0 ; \Atom_1 ; \ldots ; \Atom_n ; \String_n} \Leftrightarrow \SequenceOf{\StringAlt_0; \AtomAlt_{\sigma(1)} ; \ldots ; \AtomAlt_{\sigma(n)} ; \StringAlt_n}$
From induction assumption, I know for each $\AtomLens_i \OfType \Atom_i \Leftrightarrow \AtomAlt_i$, there exists a $\Lens_i \OfType \Regex_i \Leftrightarrow \RegexAlt_i$ such that $\SemanticsOf{\AtomLens_i}=\SemanticsOf{\Lens_i}$, where $\Regex_i=\ToRegex(\Atom_i)$, and $\RegexAlt_i=\ToRegex(\AtomAlt_i)$,
By Lemma~\ref{lem:id-clause}, there exists a $\Lens \OfType \Regex \Leftrightarrow \RegexAlt$ such that $\SemanticsOf{\Lens}=\SemanticsOf{([(\String_0,\StringAlt_0);\AtomLens_1;\ldots;\AtomLens_n;(\String_n,\StringAlt_n)],id)}$,
$\Regex=\ToRegex(\SequenceOf{\String_0;\Atom_1;\ldots;\Atom_n;\String_n})$, and
$\RegexAlt=\ToRegex(\SequenceOf{\StringAlt_0;\AtomAlt_1;\ldots;\AtomAlt_n;\StringAlt_n})$.
By Lemma~\ref{lem:perm-exp} there exists a $\Lens_{\sigma} \OfType \RegexAlt_{\Sep} \Leftrightarrow \RegexAlt_{\Sep}'$,
such that $\SemanticsOf{\Lens_{\sigma}}=\SetOf{(\Sep\Concat\String_1\Concat\Sep\Concat\ldots\Concat\String_n\Concat\Sep,\Sep\Concat\String_{\Permutation(1)}\Concat\Sep\Concat\ldots\Concat\String_{\Permutation(n)}\Concat\Sep)}$,
$\RegexAlt_{\Sep}=\ToRegex(\SequenceOf{\Sep;\Sequence_1;\ldots;\Sequence_n;\Sep})$, and
$\RegexAlt_{\Sep}'=\ToRegex(\SequenceOf{\Sep;\Sequence_{\sigma(1)};\ldots;\Sequence_{\sigma(n)}\Sep})$.
By Lemma~\ref{lem:id-clause}, there exist lenses $\Lens_{\Sep} \OfType \RegexAlt \Leftrightarrow \RegexAlt_{\Sep}$, and
$\Lens_{\Sep'} \OfType \RegexAlt_{\Sep}' \Leftrightarrow \RegexAlt'$, where
$\RegexAlt=\ToRegex(\SequenceOf{\StringAlt_0; \AtomAlt_{\sigma(1)} ; \ldots ; \AtomAlt_{\sigma(n)} ; \StringAlt_n})$, and the semantics of these add and remove the separators, respectivey.
Consider the lens $\Lens_{\Sep}' \Compose \Lens_{\sigma} \Compose \Lens_{\Sep} \Compose \Lens \OfType \Regex \Leftrightarrow \RegexAlt'$, with semantics as intended.\\
\\
$\IterateLens{\DNFLens} \OfType \StarOf{\DNFRegex} \Leftrightarrow \StarOf{\DNFRegexAlt}$\\
From induction assumption, I know that there exists $\Lens \OfType \Regex \Leftrightarrow \RegexAlt$, such that
$\SemanticsOf{\DNFLens}=\SemanticsOf{\Lens}$,
\Regex=\ToRegex(\DNFRegex), and
$\RegexAlt=\ToRegex(\DNFRegexAlt)$.\\
Consider $\IterateLens{\Lens} \OfType \StarOf{\Regex} \Leftrightarrow \StarOf{\RegexAlt}$.\\
By definition, $\StarOf{\Regex}$ and $\StarOf{\RegexAlt}$ are $\ToRegex(\StarOf{\DNFRegex})$
and $\ToRegex(\StarOf{\Regex})$, respectively.

\begin{tabular}{RcL}
\SemanticsOf{\IterateLens{\Lens}} & = &
\SetOf{(\String_0\ldots\String_n,\StringAlt_0\ldots\StringAlt_n)\SuchThat
(\String_i,\StringAlt_i)\in\SemanticsOf{\Lens}}\\
& = &
\SetOf{(\String_0\ldots\String_n,\StringAlt_0\ldots\StringAlt_n)\SuchThat
(\String_i,\StringAlt_i)\in\SemanticsOf{\DNFLens}}\\
& = &
\SemanticsOf{\IterateLens{\DNFLens}}
\end{tabular}
\end{proof}
\end{lemma}

\dnfls*
\begin{proof}

The soundess of DNF lenses follows immediatley from Lemma~\ref{lem:dnfcal}

\end{proof}

\begin{theorem}[Strong DNF Lens Soundness]
Let $\DNFLens \OfType \DNFRegex \Leftrightarrow \DNFRegexAlt$, be the typing
of a DNF lens $\DNFLens$.
and let $\Regex$ and $\RegexAlt$ be regular expressions, such that
$\LanguageOf{\DNFRegex}=\LanguageOf{\Regex}$,
and $\LanguageOf{\DNFRegexAlt}=\LanguageOf{\RegexAlt}$.
There exists a lens $\Lens : \Regex \Leftrightarrow \RegexAlt$, such that
$\SemanticsOf{\Lens}=\SemanticsOf{\DNFLens}$.
\end{theorem}

\begin{proof}
By Theorem~\ref{thm:dnfls}, there exists regular expressions $\Regex'$,
$\RegexAlt'$, such that there exists a lens $\DNFLens$ such there is the
derivation for a typing.
\begin{mathpar}
\inferrule[]
{
\Derivation{}
}
{
\DNFLens \OfType \Regex' \Leftrightarrow \RegexAlt'
}
\end{mathpar}
\SemanticsOf{\DNFLens}=\SemanticsOf{\Lens},
\LanguageOf{\Regex'}=\LanguageOf{\DNFRegex},
and \LanguageOf{\RegexAlt'}=\LanguageOf{\DNFRegexAlt'}.
Because of this, $\Regex'\equiv\Regex$, and $\RegexAlt'\equiv\RegexAlt$.
Consider the typing
\begin{mathpar}
\inferrule*
{
\inferrule*
{
\Derivation{}
}
{
\DNFLens \OfType \Regex' \Leftrightarrow \RegexAlt'
}\\
\Regex'\equiv\Regex\\
\RegexAlt'\equiv\RegexAlt
}
{
\DNFLens \OfType \Regex \Leftrightarrow \RegexAlt
}
\end{mathpar}

This satisfies the needed requirements!

\end{proof}
