Tools for reliably converting back and forth between different data
formats are increasingly important in a world full of big data.
One class of such tools are \emph{lenses}, programs that simultaneously
represent one function to convert data from type $A$ to type $B$ and a
second function to convert data from type $B$ back into data of type
$A$.  While such programs often come with important invertability properties,
they can be quite difficult to write in practice 
as a programmer must think about data conversions in two directions as once.
To overcome this difficulty, we develop algorithms for synthesizing such lenses 
automatically from their types and a small number of examples.
Unlike past work in type-directed synthesis, synthesis of lenses is
complicated by their rich type structure, which is based on regular
expressions.  More specifically, rather than simply having to solve
the problem of finding a representative term to map back and forth
between types $A$ and $B$, it is first necessary to find the right
representative types $A'$ and $B'$ amongst many equivalent regular expressions.
We show how to manage this search by defining a new language of
lenses governed by semi-canonical regular expression types and prove it
sound with respect to a standard language of bijective lenses.  We then show
how to search the reduced space for well-typed lenses that are consistent
with the given examples.  We demonstrate the effectiveness of our algorithms
by experimenting on benchmark suite containing microbenchmarks, FlashFill
examples, and linux configuration file transformations.



%% The language of regular lenses expresses programs which can convert between
%% source and target regular languages.
%% We tackle the task of synthesizing these programs through the regular expressions
%% of their types.
%% This is difficult because we cannot use basic type directed synthesis techniques,
%% as there are many equivalences in the types of these regular expressions.
%% We do this by developing a language for partially normalized regular expressions,
%% and searching through those regular expressions for two that have a lens between
%% them which can be synthesized in a type-directed way.
%% We develop strategies for efficiently enacting this search and synthesis,
%% and evaluate our strategies against a suite of microbenchmarks and linux
%% configuration files.
