\begin{figure}
\begin{mathpar}
\inferrule[Identity Atom Lens]
{
}
{
\IdentityLens : \Regex \Leftrightarrow \Regex 
}

\inferrule[Iterate Atom Lens]
{
\DNFLens : \DNFRegex_1 \Leftrightarrow \DNFRegex_2\\
\DNFRegex_1^{!*}\\
\DNFRegex_2^{!*}\\
}
{
\IterateLens{\DNFLens} : \Star{\DNFRegex_1} \Leftrightarrow \Star{\DNFRegex_2}
}

\inferrule[Clause Lens]
{
\AtomLens_1 : \Atom_{1,1} \Leftrightarrow \Atom_{1,2}\\
\ldots\\
\AtomLens_n : \Atom_{n,1} \Leftrightarrow \Atom_{n,2}\\
\Atom_{i,j} .! \Atom_{i+1,j}\\
}
{
([(\String_{1,1},\String_{1,2}) ; \AtomLens_1 ; \ldots; \AtomLens_n (\String_{n+1,1},\String_{n+1,2})],\sigma) :\\
([\Atom_{1,1};\ldots;\Atom_{n,1}],[\String_{1,1};\ldots;\String_{n+1,1}]) \Leftrightarrow\\
([\Atom_{\sigma(1),2};\ldots;\Atom_{\sigma(n),2}],[\String_{1,2};\ldots;\String_{n+1,2}])
}

\inferrule[DNF Regex Lens]
{
\ClauseLens_1 : \Clause_{1,1} \Leftrightarrow \Clause_{1,2}\\
\ldots\\
\ClauseLens_n : \Clause_{n,1} \Leftrightarrow \Clause_{n,2}\\
\Clause_{i} \cap \Clause_{j}=\emptyset\\
}
{
([\ClauseLens_1;\ldots;\ClauseLens_n],\sigma) : [\Clause_{1,1};\ldots;\Clause_{n,1}] \Leftrightarrow [\Clause_{\sigma^{-1}(1),2};\ldots;\Clause_{\sigma^{-1}(n),2}]
}
\end{mathpar}
\caption{DNF Lens Typing}
\label{fig:dnf-lens-typing}
\end{figure}
