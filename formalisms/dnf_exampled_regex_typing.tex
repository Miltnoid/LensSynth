\input{macros}



\documentclass{article}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathpartir}
\usepackage{empheq}
\begin{document}

\begin{mathpar}
\inferrule[Exampled Atom Userdef Base]
{
}
{
\Delta' \cup \{(\Regex,\UserDefined)\} \vdash (\UserDefined, [], []) : (\UserDefined, [])
}

\inferrule[Exampled Atom Userdef Add Example]
{
\Delta' \vdash \String : \Regex\\
\Delta' \cup \{(\Regex,\UserDefined)\} \vdash (\UserDefined, \StringList, \ExampleNumberListList) : (\UserDefined, \ExampleStringList)
}
{
\Delta' \cup \{(\Regex,\UserDefined)\} \vdash (\UserDefined, s::\StringList, \ExampleNumberList::\ExampleNumberListList) : (\UserDefined, s::\ExampleStringList)
}

\inferrule[Exampled Atom Star]
{
\Delta \vdash (\DNFRegex,\ExampleNumberListList) : (\DNFRegex,\ExampleStringList)\\
\ValidCombine{\Combine}{\ExampleNumberListList}
}
{
\Delta \vdash ((\DNFRegex,\ExampleNumberListList)^*,\CombineList{\ExampleNumberListList}) :
(\DNFRegex,\CombineString{\ExampleStringList})
}

\inferrule[Exampled Clause]
{
\Delta \vdash (\Atom_1,\ExampleNumberListList) : (\Atom_1,[\String_{1,1},\ldots,\String_{1,m}]) \\
\ldots\\
\Delta \vdash (\Atom_n,\ExampleNumberListList) : (\Atom_n,[\String_{n,1},\ldots,\String_{n,m}]) \\
\String_1 \in \Sigma^*\\
\ldots\\
\String_{n+1} \in \Sigma^*
}
{
\Delta \vdash ([(\Atom_1,\ExampleNumberListList);\ldots;(\Atom_n,\ExampleNumberListList)],[\String_1;\ldots;\String_{n+1}],\ExampleNumberListList) :
([\Atom_1;\ldots;\Atom_n],[\String_1;\ldots;\String_{n+1}]) [\String_1\String_{1,1}\ldots\String_{n,1}\String_{n+1},\ldots,\String_1\String_{1,m}\ldots\String_{n,m}\String_{n+1}]
}

\inferrule[Exampled DNF Regex]
{
\Delta \vdash (\Clause_1,\ExampleNumberListList_1) : (\Clause_1,\ExampleStringList_1)\\
\ldots\\
\Delta \vdash (\Clause_n,\ExampleNumberListList_n) : (\Clause_n,\ExampleStringList_n)\\
}
{
\Delta \vdash ([(\Regex_1,\ExampleNumberListList_1);\ldots;(\Regex_n,\ExampleNumberListList_n)],\NAryInterleave{\ExampleNumberListList_1}{\ExampleNumberListList_n})
: [\Regex_1;\ldots;\Regex_n], \NAryInterleave{\ExampleStringList_1}{\ExampleStringList_n} \\
}

\end{mathpar}
\\\\
Define \Parented{\ExampleNumberListList} to be held if $\ExampleNumberListList =
[0::\ExampleNumberList ; \ldots ; (\Length{\ExampleNumberListList}-1)::\ExampleNumberList]$ for some
\ExampleNumberList .
If an \ExampleNumberListList is parented, define \Parent{\ExampleNumberListList} as that \ExampleNumberList \\\\

Define $\Delta \vdash (\Regex,\ExampleNumberListList) : (\Regex, \ExampleStringList)$ as closed if:
\begin{itemize}
\item \Length{\ExampleNumberListList} = \Length{\ExampleStringList}
\item \Parented{\ExampleNumberListList} and \Parent{\ExampleNumberListList}=[]
\end{itemize}

Let $\Combine : [0,n] \twoheadrightarrow [0,m]$\\\\
Define $\ValidCombine{\Combine}{\ExampleNumberListList}$ to be held if 
\begin{itemize}
\item \Parented{\ExampleNumberListList[\Combine^{-1}(i)]}
\item $\Parent{\ExampleNumberListList[\Combine^{-1}(i)} = \Parent{\ExampleNumberListList[\Combine^{-1}(j)} \Rightarrow i = j$
\end{itemize}

If $\ValidCombine{\Combine}{\ExampleNumberListList}$\\
Define $\CombineList{\ExampleNumberListList} = [\Parent{\ExampleNumberListList[\Combine^{-1}(0)]} ; \ldots ; \Parent{\ExampleNumberListList[\Combine^{-1}(\Length{\ExampleNumberListList})]}]$\\\\
Define $\CombineString{\ExampleStringList} = [concat(\ExampleStringList[\Combine^{-1}(0)]) ; \ldots ; concat(\ExampleStringList[\Combine^{-1}(\Length{\ExampleStringList})])]$\\\\

Define \Interleaving{\Interleave} to be held, where $\NAryInterleave{\List_1}{\List_n}=\List_{n+1}$ and $\List_i \cap \List_j = \emptyset$ for $i,j \in [1,n]$, if\\
\begin{itemize}
\item $elements(\List_1)\cup \ldots \cup elements(\List_n) = elements(\List_{n+1})$
\item For $i\leq n$, $pos(x,\List_i) < pos(y,\List_i) \Rightarrow pos(x,\List_{n+1}) < pos(y,\List_{n+1})$
\end{itemize}
\end{document}
